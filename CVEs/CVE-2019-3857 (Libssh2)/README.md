# CVE-2019-3857 (Libssh2)

## Installing The Vulnerable Version

1. We clone the repository:

```C
git clone https://github.com/libssh2/libssh2.git Libssh2
```

2. We navigate into the project directory:

```C
cd Libssh2
```

3. We find the commit related to the vulnerability (using the first 7 characters of the commit ID provided above). I would like to view the 5 lines before and after the concerned commit for better context:

```C
git log --graph --oneline --all | grep -B 5 -A 5 "dc109a7"
```

> \* | | cd6c353d userauth: fix "Function call argument is an uninitialized value" (#318)
>
> \* | | 2599e2eb fixed unsigned/signed issue
>
> \* | | 4d66f676 session_disconnect: clear state
>
> \* | | 6394c0db Release notes from 1.8.1
>
> |/ /
>
> \* | **dc109a7f** Security fixes (#315)
>
> \* | e1d9bd49 fixed type warnings (#309)
>
> \* | bc00a288 Bumping version number for pending 1.8.1 release
>
> \* | 3f927a84 _libssh2_string_buf_free: use correct free (#304)
>
> \* | 3c1ff8a0 Fix for building against libreSSL #302
>
> \* | ca06fe21 Fix for when building against LibreSSL #302

Now, we should see the commit `dc109a7` for **CVE-2019-3857**.

4. We `checkout` the commit before the patch to retrieve the vulnerable version. Note that we `checkout` the `e1d9bd49` commit, not the `6394c0db` commit, because the git graph is read vertically from bottom to top:

```C
git checkout e1d9bd49
```

Eventually, we have the vulnerable version of **Libssh2** before the fix for **CVE-2019-3857** was applied. Now, we are ready to dive in.
