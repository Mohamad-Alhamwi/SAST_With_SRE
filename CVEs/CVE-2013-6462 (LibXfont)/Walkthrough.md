# CVE-2013-6462 (LibXfont)

## Installing The Vulnerable Version

1. We clone the repository:

```C
git clone https://gitlab.freedesktop.org/xorg/lib/libxfont.git LibXFont
```

2. We navigate into the project directory:

```C
cd LibXFont/
```

3. We find the commit related to the vulnerability (using the first 7 characters of the commit ID provided above). I would like to view the 5 lines before and after the concerned commit for better context:

```C
git log --graph --oneline --all | grep -B 5 -A 5 "4d024ac"
```

> * 63c7ac4 Initialize (unused) data field in fsListCataloguesReq before sending it.
> * d279ffa Remove redundant declaration of FontFileStartListFonts()
> * 2fb6295 Fix unused variable 'dir' warnings
> * 3011006 libXfont 1.4.7
> * 2a84680 Limit additional sscanf strings to fit buffer sizes
> * **4d024ac** CVE-2013-6462: unlimited sscanf overflows stack buffer in bdfReadCharacters()
> * fdcf9a9 Add AC_USE_SYSTEM_EXTENSIONS to expose non-standard extensions
> * 0d24378 Don't leak old allocation if realloc fails to enlarge it
> * 5e27c36 Make serverGeneration unsigned
> * 7d34534 Replace malloc(strlen)+strcpy/strcat calls with strdup
> * 8a9fc31 xstrdup -> strdup

Now, we should see the commit `4d024ac` for CVE-2013-6462.

4. We `checkout` the commit before the patch to retrieve the vulnerable version. Note that we checkout the `fdcf9a9` commit, not the `2a84680` commit, because the git graph is read vertically from bottom to top:

```C
git checkout fdcf9a9
```

5. Eventually, we have the vulnerable version of LibXfont before the fix for CVE-2013-6462 was applied. Now, we are ready to dive in.
